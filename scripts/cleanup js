const fs = require('fs');
const path = require('path');

const jobsFile = path.join(__dirname, '../data/jobs.json');

function cleanup() {
  if (!fs.existsSync(jobsFile)) return;
  
  const data = fs.readFileSync(jobsFile, 'utf8');
  const jobs = JSON.parse(data);
  
  const now = new Date();
  const activeJobs = jobs.filter(job => new Date(job.expires) > now);
  
  if (activeJobs.length < jobs.length) {
    fs.writeFileSync(jobsFile, JSON.stringify(activeJobs, null, 2));
    console.log(`ðŸ§¹ Removed ${jobs.length - activeJobs.length} expired jobs`);
  }
}

cleanup();
